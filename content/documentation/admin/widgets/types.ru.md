---
title: Типы виджетов
---

## API

Виджет позволяет вывести спецификацию API из файла в Gitlab репозитории или по ссылке в формате OpenAPI (Swagger) или Protobuf. При выводе спецификации OpenAPI из файла в формате YAML или JSON виджет отображает интерфейс Swagger. Во всех остальных случаях виджет отображает спецификацию в виде текста.

### Общая конфигурация

| Название          | Опциональность  | Описание                                                           | Возможные значения                   | Значение по умолчанию |
|-------------------|-----------------|--------------------------------------------------------------------|--------------------------------------|-----------------------|
| Тип спецификации  | **обязательно** | Тип спецификации                                                   | OpenAPI (Swagger), Protocol Buffers  | -                     |
| Тип источника     | **обязательно** | Тип источника, из которого будет загружаться файл со спецификацией | URL, Gitlab                          | -                     |

### Конфигурация типа источника: URL

| Название  | Опциональность  | Описание                                       | Значение по умолчанию |
|-----------|-----------------|------------------------------------------------|-----------------------|
| URL       | **обязательно** | Ссылка на файл со спецификацией                | -                     |
| Заголовки | опционально     | Заголовки для доступа к файлу со спецификацией | -                     |

### Конфигурация типа источника: Gitlab

| Название     | Опциональность  | Описание                                                               | Значение по умолчанию |
|--------------|-----------------|------------------------------------------------------------------------|-----------------------|
| Gitlab URL   | **обязательно** | URL Gitlab                                                             | -                     |
| ID проекта   | **обязательно** | Идентификатор проекта, из которого будет браться файл со спецификацией | -                     |
| Ветка        | **обязательно** | Ветка, из которой будет браться файл со спецификацией                  | -                     |
| Путь к файлу | **обязательно** | Путь к файлу со спецификацией относительно корня репозитория           | -                     |

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#gitlab).

## CodeScoring. Зависимости

Виджет позволяет вывести таблицу с зависимостями продукта на основе информации из CodeScoring с указанием названия зависимости, версии, лицензии, количество уязвимостей и другой информацией для каждой зависимости.

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#codescoring).

### Конфигурация

| Название          | Опциональность  | Описание                            | Значение по умолчанию |
|-------------------|-----------------|-------------------------------------|-----------------------|
| URL               | **обязательно** | URL CodeScoring                     | -                     |
| ID проекта        | **обязательно** | Идентификатор проекта в CodeScoring | -                     |

## CodeScoring. Уязвимости

Виджет позволяет вывести таблицу с уязвимостями продукта на основе информации из CodeScoring с указанием кода уязвимости, уровня критичности, наличия эксплойта, исправленной версии для каждой уязвимости.

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#codescoring).

### Конфигурация

| Название          | Опциональность  | Описание                            | Значение по умолчанию |
|-------------------|-----------------|-------------------------------------|-----------------------|
| URL               | **обязательно** | URL CodeScoring                     | -                     |
| ID проекта        | **обязательно** | Идентификатор проекта в CodeScoring | -                     |

## DefectDojo. Уязвимости в продукте (детали)

Виджет позволяет вывести таблицу с уязвимостями продукта на основе информации из DefectDojo с указанием уровня критичности, описания и даты обнаружения для каждой уязвимости.

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#defectdojo).

### Конфигурация

| Название          | Опциональность  | Описание                                               | Значение по умолчанию |
|-------------------|-----------------|--------------------------------------------------------|-----------------------|
| URL               | **обязательно** | URL DefectDojo. Указывается без пути к API (`/api/v2`) | -                     |
| Название продукта | **обязательно** | Название продукта в DefectDojo                         | -                     |

### Дополнительные возможности виджета

При просмотре виджета доступна настройка следующих параметров:

* **Активные уязвимости** - если включено, то загружаются уязвимости продукта с флагом ‘Active’ = true. Если отключено, то загружаются уязвимости продукта с флагом ‘Active’ = false. Включено по умолчанию.
* **Дублирующиеся уязвимости** - если включено, то загружаются уязвимости продукта с флагом ‘Duplicate’ = true. Если отключено, то загружаются уязвимости продукта с флагом ‘Duplicate’ = false. Отключено по умолчанию.

## DefectDojo. Уязвимости в продукте (общая статистика)

Виджет позволяет вывести график с общим количеством уязвимостей продукта на основе информации из DefectDojo с разбивкой по уровням критичности.

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#defectdojo).

### Конфигурация

| Название          | Опциональность  | Описание                                                                                                                         | Значение по умолчанию |
|-------------------|-----------------|----------------------------------------------------------------------------------------------------------------------------------|-----------------------|
| URL               | **обязательно** | URL DefectDojo. Указывается без пути к API (`/api/v2`)                                                                           | -                     |
| Название продукта | **обязательно** | Название продукта в DefectDojo                                                                                                   | -                     |

### Дополнительные возможности виджета

При просмотре виджета доступна настройка следующих параметров:

* **Активные уязвимости** - если включено, то загружаются уязвимости продукта с флагом ‘Active’ = true. Если отключено, то загружаются уязвимости продукта с флагом ‘Active’ = false. Включено по умолчанию.
* **Дублирующиеся уязвимости** - если включено, то загружаются уязвимостиля продукта с флагом ‘Duplicate’ = true. Если отключено, то загружаются уязвимости продукта с флагом ‘Duplicate’ = false. Отключено по умолчанию.

## Docker образы

Виджет позволяет отображать данные о доступных образах в docker registry. На виджет выводятся все доступные теги и команда docker pull. Поддерживается поиск.

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#docker-registry).

### Конфигурация

| Название   | Опциональность  | Описание                                                                                                                                         | Значение по умолчанию |
|------------|-----------------|--------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
| URL        | **обязательно** | URL Docker Registry. Используется для получения данных о доступных образах                                                                       | -                     |
| Название   | опционально     | Название репозитория, из которого будут загружаться данные в виджет. Пример: `repo`. Без указания названия, будут получены все доступные образы  | -                     |

## Gitlab. Запросы слияния

Виджет позволяет отображать данные о Merge Requests (MR) в платформе GitLab и выполнять действия с ними.

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#gitlab).

### Конфигурация

| Название   | Опциональность  | Описание                                                                   | Значение по умолчанию |
|------------|-----------------|----------------------------------------------------------------------------|-----------------------|
| URL        | **обязательно** | URL GitLab API. Используется для получения данных из GitLab                | -                     |
| ID проекта | **обязательно** | ID проекта, из которого будут загружаться данные в виджет. Пример: `12345` | -                     |

### Фильтрация по статусу

Виджет позволяет фильтровать отображаемые Merge Requests по статусу. В настройках запроса виджета можно выбрать один из следующих статусов:

- **Открытые** - показывает только открытые MR.
- **Закрытые** - показывает только закрытые MR.
- **Слитые** - показывает только слитые MR.
- **Заблокированные** - показывает только заблокированные MR.

По умолчанию отображаются только открытые MR.

### Дополнительные возможности виджета

При активированной функции действий в настройках виджет позволяет выполнять следующие действия с Merge Requests:

- **Слить** - слияние открытого запроса на слияние (доступно только для открытых MR).
- **Закрыть** - закрытие запроса на слияние.
- **Отметить как черновик/готово** - изменение статуса черновика запроса на слияние.
- **Просмотр изменений** - просмотр диффа (изменений) в запросе на слияние.

{{< alert level="info" >}}
Для выполнения действий с MR требуются соответствующие права доступа в GitLab репозитории.
{{< /alert >}}

## Gitlab. Пайплайны

Виджет позволяет отображать данные о пайплайнах в платформе GitLab.

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#gitlab).

### Конфигурация

| Название   | Опциональность  | Описание                                                                   | Значение по умолчанию |
|------------|-----------------|----------------------------------------------------------------------------|-----------------------|
| URL        | **обязательно** | URL GitLab API. Используется для получения данных из GitLab                | -                     |
| ID проекта | **обязательно** | ID проекта, из которого будут загружаться данные в виджет. Пример: `12345` | -                     |

### Дополнительные возможности виджета

#### Запуск пайплайнов

Виджет позволяет запускать пайплайны в GitLab напрямую из платформы DDP.

##### Конфигурация

| Название   | Обязательность  | Описание                                                                           | Значение по умолчанию |
|------------|-----------------|------------------------------------------------------------------------------------|-----------------------|
| Ref        | **обязательно** | Целевая ветка или тег для запуска пайплайна.                                       | -                     |
| Переменные | опционально     | Переменные в формате ключ-значение, которые будут переданы в запускаемый пайплайн. | -                     |

## GitLab. Редактор пайплайна

Виджет позволяет редактировать конфигурацию пайплайна GitLab CI/CD (файл `.gitlab-ci.yml`) и создавать запросы на слияние с изменениями.

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#gitlab).

### Конфигурация

| Название   | Опциональность  | Описание                                                                   | Значение по умолчанию |
|------------|-----------------|----------------------------------------------------------------------------|-----------------------|
| URL        | **обязательно** | URL GitLab API. Используется для получения данных из GitLab                | -                     |
| ID проекта | **обязательно** | ID проекта, из которого будут загружаться данные в виджет. Пример: `12345` | -                     |

### Отображаемые данные

Виджет отображает:

* **Редактор кода** - Monaco Editor для редактирования файла `.gitlab-ci.yml`.
* **Дифф-просмотр** - отображение изменений между оригинальной и редактируемой версией конфигурации.

### Дополнительные возможности виджета

#### Создание запроса на слияние

Виджет позволяет создавать запросы на слияние с изменениями конфигурации пайплайна.

##### Параметры запроса на слияние

| Название          | Обязательность  | Описание                                                                           | Значение по умолчанию |
|-------------------|-----------------|------------------------------------------------------------------------------------|-----------------------|
| Заголовок MR      | **обязательно** | Краткий заголовок, описывающий цель запроса на слияние.                           | -                     |
| Описание MR       | опционально     | Подробное описание запроса на слияние и изменений.                                | -                     |
| Название новой ветки | **обязательно** | Название новой ветки, которая будет содержать ваши изменения.                     | -                     |
| Целевая ветка     | **обязательно** | Ветка, в которую будет выполнен запрос на слияние.                                | main                  |
| Сообщение коммита | **обязательно** | Описание изменений, внесенных в конфигурацию пайплайна.                           | -                     |

#### Ограничения

* Виджет работает только с файлом `.gitlab-ci.yml` в корне проекта.
* Для создания запроса на слияние требуются права на запись в репозиторий.
* Максимальный размер файла конфигурации ограничен возможностями GitLab API.

## GitLab. Статистика пайплайнов

Виджет позволяет отображать статистику пайплайнов в платформе GitLab, включая общую статистику, распределение по статусам, источникам, участникам и веткам.

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#gitlab).

### Конфигурация

| Название   | Опциональность  | Описание                                                                   | Значение по умолчанию |
|------------|-----------------|----------------------------------------------------------------------------|-----------------------|
| URL        | **обязательно** | URL GitLab API. Используется для получения данных из GitLab                | -                     |
| ID проекта | **обязательно** | ID проекта, из которого будут загружаться данные в виджет. Пример: `12345` | -                     |

### Отображаемые данные

Виджет отображает следующую статистику:

#### Основные метрики

* **Общее количество пайплайнов** - общее число пайплайнов за выбранный период.
* **Процент успеха** - процент успешно выполненных пайплайнов.
* **Процент неудач** - процент неудачно выполненных пайплайнов.
* **Средняя длительность** - среднее время выполнения пайплайнов.

#### Распределение по статусам

* Успешные пайплайны.
* Неудачные пайплайны.
* Отмененные пайплайны.
* Пропущенные пайплайны.
* Ручные пайплайны.

#### Распределение по источникам

* Push (коммиты).
* Merge requests (запросы слияния).
* Schedule (по расписанию).
* Web (через веб-интерфейс).

#### Топ участников

* Список участников с наибольшим количеством запущенных пайплайнов.
* Аватары участников (при наличии).
* Количество пайплайнов для каждого участника.

#### Активность веток

* Список веток с наибольшим количеством пайплайнов.
* Количество пайплайнов для каждой ветки.

### Параметры запроса

| Название    | Опциональность  | Описание                                                                           | Значение по умолчанию |
|-------------|-----------------|------------------------------------------------------------------------------------|-----------------------|
| Начальная дата | **обязательно** | Начальная дата для анализа пайплайнов в формате ISO 8601. Пример: `2024-01-01T00:00:00Z` | -                     |
| Конечная дата   | **обязательно** | Конечная дата для анализа пайплайнов в формате ISO 8601. Пример: `2024-01-31T23:59:59Z` | -                     |
| Ветка           | опционально     | Фильтр по конкретной ветке. Если не указана, анализируются все ветки.              | -                     |

### Ограничения

* Виджет анализирует максимум 100 пайплайнов за один запрос для оптимизации производительности.
* Статистика рассчитывается только для пайплайнов с валидными данными (имеющими статус и время выполнения).
* Данные обновляются при каждом обновлении виджета.

## Gitlab. Теги

Виджет позволяет отображать данные о тегах проекта в платформе GitLab.

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#gitlab).

### Конфигурация

| Название   | Опциональность  | Описание                                                                   | Значение по умолчанию |
|------------|-----------------|----------------------------------------------------------------------------|-----------------------|
| URL        | **обязательно** | URL GitLab API. Используется для получения данных из GitLab                | -                     |
| ID проекта | **обязательно** | ID проекта, из которого будут загружаться данные в виджет. Пример: `12345` | -                     |

### Дополнительные возможности виджета

#### Создание тегов

Виджет позволяет создать теги в GitLab напрямую из платформы DDP.

##### Конфигурация

| Название   | Обязательность  | Описание                                                                           | Значение по умолчанию |
|------------|-----------------|------------------------------------------------------------------------------------|-----------------------|
| Название   | **обязательно** | Название создаваемого тега.                                                        | -                     |
| Создать из | **обязательно** | Целевая ветка или тег для запуска пайплайна.                                       | -                     |
| Описание   | опционально     | Описание создаваемого тега.                                                        | -                     |

## GitLab. Релизы

Виджет отображает список релизов GitLab-проекта, подсвечивает последний релиз и показывает связанную информацию: тег, ссылку на коммит, автора, дату публикации и описание (поддерживает Markdown).

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#gitlab).

### Конфигурация

| Название   | Опциональность  | Описание                                                                   | Значение по умолчанию |
|------------|-----------------|----------------------------------------------------------------------------|-----------------------|
| ID проекта | **обязательно** | ID проекта, из которого будут загружаться данные в виджет. Пример: `12345` | -                     |

### Дополнительные возможности виджета

#### Создание релиза

Виджет позволяет создать релиз в GitLab напрямую из платформы DDP:

| Название        | Обязательность  | Описание                                                                                           | Значение по умолчанию |
|-----------------|-----------------|----------------------------------------------------------------------------------------------------|-----------------------|
| Название релиза | **обязательное**| Название релиза, отображаемое в списке.                                                                  | -                     |
| Тег             | **обязательное**| Существующий тег, на основе которого будет сформирован релиз (выбирается из списка тегов проекта). | -                     |
| Описание        | опционально     | Описание релиза в формате Markdown.                                                                 | -                     |

Созданный релиз автоматически появляется в списке, а последний релиз подсвечивается.

## GitLab. Участники

Виджет позволяет отображать данные об участников проекта в GitLab. [Подробнее об участниках](https://docs.gitlab.com/user/project/members/).

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#gitlab).

### Конфигурация

| Название   | Опциональность  | Описание                                                                   | Значение по умолчанию |
|------------|-----------------|----------------------------------------------------------------------------|-----------------------|
| ID проекта | **обязательно** | ID проекта, из которого будут загружаться данные в виджет. Пример: `12345` | -                     |

## Просмотр репозитория

Виджет позволяет просматривать структуру и содержимое файлов в репозитории.

{{< alert level="info" >}}
В текущей версии виджет работает только с репозиториями GitLab.
{{< /alert >}}

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#gitlab).

### Конфигурация

| Название     | Опциональность  | Описание                                                         | Значение по умолчанию |
|--------------|-----------------|------------------------------------------------------------------|-----------------------|
| Провайдер    | **обязательно** | Провайдер репозитория                                            | -                     |
| ID проекта   | **обязательно** | ID проекта в GitLab. Пример: `12345`                             | -                     |
| Ветка / Тег  | опционально     | Название ветки, тег или SHA коммита                              | main                  |
| Путь         | опционально     | Путь к директории в репозитории (оставьте пустым для корня)      | -                     |
| Рекурсивно   | опционально     | Получать файлы рекурсивно из поддиректорий                       | false                 |

## Jenkins. Пайплайны

Виджет отображает данные о пайплайнах в Jenkins и позволяет управлять сборками.

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#jenkins).

### Конфигурация

| Название   | Опциональность  | Описание                                                                            | Значение по умолчанию |
|------------|-----------------|-------------------------------------------------------------------------------------|-----------------------|
| URL        | **обязательно** | URL Jenkins. Используется для получения данных из Jenkins                           | -                     |
| Название   | **обязательно** | Название пайплайна в Jenkins. Поддерживается вложенность: `folder1/folder2/jobName` | -                     |

### Отображаемые данные

Виджет автоматически определяет тип пайплайна и отображает соответствующее представление.

#### Обычные пайплайны

Для обычных пайплайнов виджет отображает:

- **Список сборок** - таблица со всеми сборками пайплайна с информацией о номере, статусе, длительности, времени выполнения и пользователе.
- **Последняя сборка** - информация о последней выполненной сборке.
- **Последняя успешная сборка** - информация о последней успешной сборке.
- **Последняя неудачная сборка** - информация о последней неудачной сборке.

#### Multibranch пайплайны

Для multibranch пайплайнов виджет отображает:

- **Список веток** - таблица со всеми ветками с информацией о статусе, количестве сборок и последней сборке для каждой ветки.
- Всю информацию, описанную в разделе "обычные пайплайны", в разрезе каждой ветки.

### Дополнительные возможности виджета

Виджет позволяет выполнять следующие действия:

#### Для обычных пайплайнов

- **Запустить сборку** - запуск новой сборки. Если у сборки есть параметры, отображается диалог для их ввода:
  - Строковые параметры.
  - Пароли.
  - Выбор из списка.
  - Булевы значения.
- **Отменить сборку** - отмена выполняющейся сборки.
- **Повторить сборку** - повторный запуск последней сборки.
- **Просмотр логов** - просмотр логов выполнения сборки.

#### Для multibranch пайплайнов

- **Запустить сборку ветки** - запуск новой сборки для конкретной ветки. Если у сборки есть параметры, отображается диалог для их ввода.
- **Получить сборки ветки** - загрузка списка сборок для конкретной ветки.
- **Сканировать multibranch** - запуск сканирования multibranch пайплайна для обнаружения новых веток.
- **Просмотр логов** - просмотр логов выполнения сборки.

## Jira. Задачи

Виджет позволяет отображать задачи из Jira на основе JQL-запроса.

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#jira).

### Конфигурация

| Название   | Опциональность  | Описание                                                                    | Значение по умолчанию |
|------------|-----------------|-----------------------------------------------------------------------------|-----------------------|
| URL        | **обязательно** | URL Jira. Используется для получения данных из Jira                         | -                     |
| JQL        | **обязательно** | JQL-запрос для фильтрации задач. Пример: `project = PROJ AND status = Open` | -                     |

### Параметры запроса

| Название             | Опциональность | Описание                                                                          | Значение по умолчанию |
|----------------------|----------------|-----------------------------------------------------------------------------------|-----------------------|
| JQL                  | опционально    | JQL-запрос для фильтрации задач. Если не указан, используется JQL из конфигурации | Из конфигурации       |
| Максимум результатов | опционально    | Максимальное количество задач для отображения (от 1 до 1000)                      | 50                    |

### Дополнительные возможности виджета

- **Просмотр описания** - при клике на кнопку "Просмотр описания" открывается диалоговое окно с полным описанием задачи.
- **Переход в Jira** - клик по ключу задачи открывает задачу в Jira в новой вкладке.
- **Динамическая фильтрация** - возможность изменить JQL-запрос и максимальное количество результатов прямо в виджете без изменения конфигурации.

## Helm. Релизы

Виджет позволяет отображать данные о Helm Releases в Kubernetes и производить rollback на предыдущие версии.

Данные, отображаемые на виджете:

* **Список релизов Helm**: информация о текущих релизах, созданных с помощью Helm в указанном Kubernetes пространстве.
* **Манифесты релизов**: манифесты, связанные с Helm-релизами в указанном Kubernetes пространстве. Это включает в себя файлы YAML, которые определяют конфигурацию и состояние ресурсов.
* **Values**: переменные, которые использовались для развертывания Helm-релизов.

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#kubernetes).

### Конфигурация

| Название       | Опциональность  | Описание                                                                             | Значение по умолчанию |
|----------------|-----------------|--------------------------------------------------------------------------------------|-----------------------|
| Namespace      | опционально     | Неймспейс, из которого будут загружаться данные в виджет. Пример: `default`          | -                     |
| Релиз          | опционально     | Название релиза, из которого будут загружаться данные в виджет. Пример: `my-release` | -                     |

## Iframe

{{< alert level="warning" >}}
Виджет Iframe работает только при включенной опции `allowIframe: true` в конфигурации заголовков безопасности (`security.headers.csp.allowIframe`). По умолчанию эта опция отключена, поэтому виджет не будет отображать контент до изменения конфигурации.
{{< /alert >}}

Виджет позволяет отображать данные из внешнего источника.

### Конфигурация

| Название   | Опциональность  | Описание                                                                   | Значение по умолчанию |
|------------|-----------------|----------------------------------------------------------------------------|-----------------------|
| URL        | **обязательно** | URL внешнего источника. Используется для отображения данных в виджете.     | -                     |

## Kafka. ACLs

Виджет позволяет отображать список ACLs кластера Kafka.

Для каждого ACL отображается следующая информация:

* Субъект.
* Тип ресурса.
* Шаблон.
* Тип шаблона.
* Хост.
* Операция.
* Тип разрешения.

### Аутентификация

Для работы с виджетом требуется учётная запись пользователя. Система поддерживает следующие методы аутентификации:

* PLAINTEXT.
* SCRAM-SHA-256.
* SCRAM-SHA-512.

### Конфигурация

| Название                | Опциональность  | Описание                                                                                                                                                                                                   | Значение по умолчанию |
|-------------------------|-----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
| URL                     | **обязательно** | URL Kafka кластера                                                                                                                                                                                         | -                     |
| Протокол аутентификации | **обязательно** | Протокол для подключения к Kafka. [Подробнее](https://kafka.apache.org/documentation/#adminclientconfigs_security.protocol)                                                                                | -                     |
| Механизм SASL           | опционально     | Механизм аутентификации, который будет использовать SASL. Обязателен при использовании протокола SASL_PLAINTEXT или SASL_SSL. [Подробнее](https://kafka.apache.org/documentation/#security_sasl_mechanism) | -                     |
| Пользователь Kafka      | **обязательно** | Username учётной записи для взаимодействия с Kafka                                                                                                                                                         | -                     |
| Пароль                  | **обязательно** | Пароль учётной записи для взаимодействия с Kafka                                                                                                                                                           | -                     |
| Типы ресурсов           | опционально     | Фильтр по типам ресурсов                                                                                                                                                                                   | -                     |
| Типы шаблонов           | опционально     | Фильтр по типам шаблонов                                                                                                                                                                                   | -                     |
| Операции                | опционально     | Фильтр по операциям                                                                                                                                                                                        | -                     |
| Типы разрешений         | опционально     | Фильтр по типам разрешений                                                                                                                                                                                 | -                     |
| Субъекты                | опционально     | Фильтр по субъектам. Поддерживается шаблонизация и регулярные выражения                                                                                                                                    | -                     |
| Хосты                   | опционально     | Фильтр по хостам. Поддерживается шаблонизация и регулярные выражения                                                                                                                                      | -                     |

### Дополнительные возможности виджета

При активированной функции действий в настройках виджет позволяет:

* Создавать новые правила ACL.
* Удалять существующие правила ACL.

## Kafka. Топики

Виджет позволяет отображать различные данные о Kafka топиках.

Для каждого топика доступно:

* Общая информация о топике: основные параметры, конфигурация и статус.
* Информация о партициях: лидер и оффсеты, количество реплик и т.д.
* Информация о консьюмерах: список активных потребителей, их группы, текущие оффсеты и лаги.
* Сообщения: просмотр содержимого сообщений топиков.
* Поиск сообщений: фильтрация сообщений по timestamp и offset.
* Настройки топика: просмотр конфигурации топика в виде таблицы ключ-значение.

### Аутентификация

Для работы с виджетом требуется учётная запись пользователя. Система поддерживает следующие методы аутентификации:

* PLAINTEXT.
* SCRAM-SHA-256.
* SCRAM-SHA-512.

{{< alert level="info" >}}
Доступность информации в виджете определяется уровнем прав подключённой учётной записи.
{{< /alert >}}

### Конфигурация

| Название                | Опциональность  | Описание                                                                                                                                                                                                   | Значение по умолчанию |
|-------------------------|-----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
| URL                     | **обязательно** | URL Kafka кластера                                                                                                                                                                                         | -                     |
| Протокол аутентификации | **обязательно** | Протокол для подключения к Kafka. [Подробнее](https://kafka.apache.org/documentation/#adminclientconfigs_security.protocol)                                                                                | -                     |
| Механизм SASL           | опционально     | Механизм аутентификации, который будет использовать SASL. Обязателен при использовании протокола SASL_PLAINTEXT или SASL_SSL. [Подробнее](https://kafka.apache.org/documentation/#security_sasl_mechanism) | -                     |
| Пользователь Kafka      | **обязательно** | username учётной записи для взаимодействия с Kafka                                                                                                                                                         | -                     |
| Пароль                  | **обязательно** | пароль учётной записи для взаимодействия с Kafka                                                                                                                                                           | -                     |
| Топики Kafka            | опционально     | Название топика или регулярное выражение для фильтрации отображаемых топиков в виджете; при пустом значении отображаются все доступные пользователю топики.                                                | -                     |

### Дополнительные возможности виджета

При активированной функции действий в настройках виджет позволяет:

* Создавать новые топики.
* Удалять существующие топики.
* Отправлять сообщение в топик.
* Очищать топик от сообщений.

## Kubernetes deployments

Виджет Kubernetes deployments позволяет выводить основную информацию обо всех deployments в Kubernetes кластере. Доступна фильтрация по namespace и/или по label selector.

Для каждого ресурса Deployment доступны:

- **Просмотр спецификации и статуса Deployment**.
- **Масштабирование количества реплик Deployment**. Для применения изменений после выбора требуемого количества реплик необходимо нажать кнопку «Сохранить» с иконкой дискеты.
- **Просмотр информации о подах**, управляемых Deployment, и контейнерах этих подов, включая просмотр логов каждого контейнера.
- **Просмотр и редактирование ресурсов контейнеров**. Виджет отображает все настроенные ресурсы контейнеров, включая CPU, Memory, ephemeral-storage и другие типы ресурсов. Редактирование доступно только для CPU и Memory в секциях `requests` и `limits`. Изменения применяются на уровне Deployment и распространяются на все поды, управляемые данным Deployment. При очистке значений CPU или Memory соответствующие ресурсы удаляются из конфигурации контейнера. Остальные ресурсы (например, `ephemeral-storage`) отображаются, но не могут быть отредактированы через виджет.

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#kubernetes).

### Конфигурация

| Название            | Опциональность  | Описание                                                                                                                                                                       | Значение по умолчанию |
|---------------------|-----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
| Kubernetes API      | **обязательно** | URL API сервера Kubernetes. Используется для получения данных из Kubernetes                                                                                                    | -                     |
| Namespace           | опционально     | Kubernetes namespace из которого будут загружаться deployment. В случае, если namespace не указан, виджет будет пытаться загрузить все deployment кластера. Пример: `default`  | -                     |
| Label selector      | опционально     | Селекторы для фильтрации получаемых deployment. Перечисляются через запятую. Пример: `app.kubernetes.io/name=example`                                                          | -                     |

## Kubernetes ingresses

Виджет позволяет отображать данные о Ingress в платформе Kubernetes.

Для каждого Ingress доступны:

* Просмотр спецификации Ingress в виде YAML-конфигурации.
* Правила Ingress.
* Настройки TLS.

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#kubernetes).

### Конфигурация

| Название       | Опциональность  | Описание                                                                                                                                                                           | Значение по умолчанию |
|----------------|-----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
| URL            | **обязательно** | URL API сервера Kubernetes. Используется для получения данных из Kubernetes                                                                                                        | -                     |
| Namespace      | опционально     | Неймспейс Kubernetes из которого будут загружаться ingresses. В случае, если неймспейс не указан, виджет будет пытаться загрузить все ingress кластера. Пример: `default` | -                     |
| Label selector | опционально     | Селекторы для фильтрации получаемых ingress. Перечисляются через запятую. Пример: `app.kubernetes.io/name=example`                                                                 | -                     |

## Kubernetes pods

Виджет позволяет отображать данные о подах в платформе Kubernetes.

Для каждого pod доступны:

* Просмотр спецификации пода в виде YAML-конфигурации.
* Логи контейнеров.
* Различная информация о состоянии пода: статус, количество перезапусков и др.

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#kubernetes).

### Конфигурация

| Название       | Опциональность  | Описание                                                                                                         | Значение по умолчанию |
|----------------|-----------------|------------------------------------------------------------------------------------------------------------------|-----------------------|
| URL            | **обязательно** | URL API сервера Kubernetes. Используется для получения данных из Kubernetes                                      | -                     |
| Namespace      | опционально     | Неймспейс, из которого будут загружаться данные в виджет. Пример: `default`                                      | -                     |
| Label selector | опционально     | Селекторы для фильтрации получаемых подов. Перечисляются через запятую. Пример: `app.kubernetes.io/name=example` | -                     |

## Markdown

Виджет обеспечивает отображение текста, написанного в формате Markdown.

### Конфигурация

| Название   | Опциональность  | Описание                                                                              | Значение по умолчанию |
|------------|-----------------|---------------------------------------------------------------------------------------|-----------------------|
| Markdown   | **обязательно** | Текст в формате Markdown. Отображается в виджете в отформатированном виде | -                     |

## Nexus artifacts

Виджет позволяет выводить список артефактов в репозитории Nexus.

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#nexus).

### Конфигурация

| Название   | Опциональность  | Описание                                                                            | Значение по умолчанию |
|------------|-----------------|-------------------------------------------------------------------------------------|-----------------------|
| URL        | **обязательно** | URL Nexus API. Используется для получения данных из Nexus                           | -                     |
| Repository | **обязательно** | Название репозитория, данные из которого будут отображаться в виджете. Пример: `my-repo` | -                     |
| Name       | опционально     | Название артефакта, данные о котором будут отображаться в виджете                        | -                     |

## Opensearch index

Виджет Opensearch index позволяет отобразить данные из определенного index или index pattern в платформе. Данные по умолчанию сортируются от более новых к более старым. Доступен полнотекстовый поиск для фильтрации отображаемых данных. Для каждой записи (строки таблицы) доступно отображение в формате «ключ-значение», либо в JSON. При указании index pattern в виджете будет выводиться ссылка на страницу Discover в OpenSearch Dashboards.

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#opensearch).

### Конфигурация

| Название                 | Опциональность  | Описание                                                                                                                                                   | Значение по умолчанию |
|--------------------------|-----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
| API URL                  | **обязательно** | URL Opensearch API. Используется для получения данных из Opensearch                                                                                        | -                     |
| Dashboards URL           | **обязательно** | URL Opensearch Dashboards. Используется при генерации ссылки для перехода в Opensearch и просмотра данных непосредственно в системе                        | -                     |
| Index pattern            | **обязательно** | Название index pattern из которого будут загружаться данные в виджет. Может содержать символ "*". Примеры: `security-auditlog`, `security-auditlog-*`      | -                     |
| Timestamp field          | опционально     | Название поля с timestamp. Значение поля выводится в таблице с данными в отдельной колонке                                                                 | @timestamp            |

## Prometheus metrics (range)

Виджет позволяет построить график из диапазона значений на основе метрики из Prometheus, задать для него единицу измерения и выбрать пороговое значение. Запрос (query), указанный в виджете, должен возвращать тип Scalar или тип Vector с одним значением.

Пример корректного запроса для виджета:

```sh
rate(nginx_ingress_controller_nginx_process_connections[5m])
```

### Конфигурация

| Название              | Опциональность  | Описание                                                                                                                             | Значение по умолчанию |
|-----------------------|-----------------|--------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
| URL                   | **обязательно** | URL Prometheus                                                                                                                       | -                     |
| Query                 | **обязательно** | Запрос метрики из Prometheus в формате PromQL                                                                                        | -                     |
| Шаг разрешения (сек.) | **обязательно** | Интервал между отсчетами на горизонтальной оси (в секундах)                                                                          | 60                    |
| Метка                 | **обязательно** | Метка в результатах запроса, чье уникальное значение присваивается в качестве названий соответствующих линий на графике визуализации | -                     |
| Порог                 | опционально     | Порог, отображаемый в виде горизонтальной красной полосы на графике                                                                  | -                     |
| Минимальное значение  | опционально     | Начальная точка отсчета для вертикальной линии на графике                                                                            | -                     |
| Максимальное значение | опционально     | Предельная точка отсчета для вертикальной линии на графике                                                                           | -                     |
| InsecureSkipVerify    | опционально     | Отключение проверки подлинности TLS/SSL-сертификата Prometheus                                                                       | false                 |

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#prometheus).

### Дополнительные возможности виджета

При просмотре виджета возможно настроить диапазон отображаемых значений. Доступные параметры отображения диапазона:

* Интервал.
* Минимальное значение (начальная точка отсчета для вертикальной линии на графике).
* Максимальное значение (предельная точка отсчета для вертикальной линии на графике).

## Prometheus metrics (single)

Виджет позволяет вывести одно число на основе метрики из Prometheus, задать для него единицу измерения и выбрать пороговое значение. Query, указанная в виджете, должна возвращать тип Scalar или тип Vector с одним значением.

Пример корректной query для виджета:

```sh
sum(ingress_nginx_detail_requests_total)
```

### Конфигурация

| Название                         | Опциональность  | Описание                                                                                                                      | Значение по умолчанию |
|----------------------------------|-----------------|-------------------------------------------------------------------------------------------------------------------------------|-----------------------|
| URL                              | **обязательно** | URL Prometheus                                                                                                                | -                     |
| Query                            | **обязательно** | Query для запроса метрики из Prometheus в формате PromQL                                                                      | -                     |
| Количество цифр после запятой    | опционально     | Точность, с которой будет выводиться полученное значение                                                                      | -                     |
| Единица измерения                | опционально     | Постфикс, с которым будет выводиться полученное значение                                                                      | -                     |
| Отображать пороговое значение    | опционально     | Отображать пороговое значение в формате <значение метрики> / <пороговое значение>                                             | false                 |
| Пороговое значение               | опционально     | Пороговое значение                                                                                                            | -                     |
| Меньшее значение считается лучше | опционально     | Метрика считается «хорошей», когда её значение ниже заданного порогового значения                                             | false                 |
| Порог предупреждения (%)         | опционально     | Граница между красным и оранжевым цветами. Если значение метрики превышает этот процент от порога, оно получит оранжевый цвет | 60                    |
| Порог успеха (%)                 | опционально     | Граница между оранжевым и зелёным цветами. Если значение метрики превышает этот процент от порога, оно получит зеленый цвет   | 90                    |
| InsecureSkipVerify               | опционально     | Отключение проверки подлинности TLS/SSL-сертификата Prometheus                                                                | false                 |

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#prometheus).

## Sonarqube

Виджет позволяет отображать данные о метриках в платформе SonarQube.

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#sonarqube).

### Конфигурация

| Название     | Опциональность  | Описание                                                                                   | Значение по умолчанию                   |
|--------------|-----------------|--------------------------------------------------------------------------------------------|-----------------------------------------|
| URL          | **обязательно** | Адрес SonarQube, например, `https://sonarqube.example.com`                                   | -                                       |
| Ключ проекта | **обязательно** | Идентификатор проекта в SonarQube                                                          | -                                       |
| Ветка        | опционально     | Ветка проекта для которой будут браться метрики                                            | Согласно настройкам проекта в Sonarqube |
| Метрики      | **обязательно** | Метрики проекта, которые будут выводиться в виджете. В конфигурации указывается Metric key |                                         |

[Список возможных метрик](https://docs.sonarsource.com/sonarqube-server/latest/user-guide/code-metrics/metrics-definition) для текущей версии SonarQube.

### Дополнительные возможности виджета

Виджет позволяет просматривать данные не только для ветки по умолчанию, но и для любой другой ветки.

## S3 bucket

Виджет позволяет просматривать содержимое S3-совместимых хранилищ объектов, таких как Amazon S3, Yandex Object Storage, MinIO и другие.

Для каждого объекта доступно:

* Просмотр списка объектов в контейнере (bucket) с информацией о размере, дате изменения и классе хранения.
* Поиск объектов по префиксу (пути).
* Загрузка файлов из bucket.
* Просмотр детальной метаинформации объектов (размер, тип контента, метаданные, настройки кеширования и т.д.).
* Навигация по папкам bucket.

### Аутентификация

Для работы с виджетом требуется учётная запись с правами доступа к S3 Bucket. Система поддерживает следующие методы аутентификации:

* Access Key ID и Secret Access Key.
* Поддержка различных S3-совместимых провайдеров через настройку эндпоинта.

{{< alert level="info" >}}
В отличие от других виджетов, S3 Bucket виджет не поддерживает использование внешних сервисов для передачи учётных данных. Все параметры аутентификации указываются непосредственно в конфигурации виджета.
{{< /alert >}}

### Использование шаблонов для учётных данных

Для повышения безопасности можно использовать механизм шаблонизации с учётными данными:

* `{{ .credentials.accessKeyId }}` - подставить Access Key ID из учётных данных.
* `{{ .credentials.secretAccessKey }}` - подставить Secret Access Key из учётных данных.

{{< alert level="info" >}}
Доступность информации в виджете определяется уровнем прав подключённой учётной записи.
{{< /alert >}}

### Конфигурация

| Название           | Опциональность  | Описание                                                                             | Значение по умолчанию |
|--------------------|-----------------|--------------------------------------------------------------------------------------|-----------------------|
| Название bucket    | **обязательно** | Название S3 Bucket для просмотра                                                     | -                     |
| Endpoint           | **обязательно** | Эндпоинт URL S3-совместимого хранилища (например, `https://storage.yandexcloud.net`) | -                     |
| Регион             | **обязательно** | Регион, в котором находится Bucket                                                   | -                     |
| Access Key ID      | **обязательно** | Идентификатор ключа доступа для аутентификации                                       | -                     |
| Secret Access Key  | **обязательно** | Секретный ключ доступа для аутентификации                                            | -                     |
| Префикс            | опционально     | Префикс (путь) для фильтрации объектов при первоначальной загрузке                   | -                     |
| Максимум объектов  | опционально     | Максимальное количество объектов для отображения за один запрос (по умолчанию 100)   | 100                   |

### Дополнительные возможности виджета

### Поиск объектов

Виджет позволяет искать объекты по префиксу (пути). При поиске список объектов обновляется в соответствии с заданным префиксом.

{{< alert level="info" >}}
Поиск работает только при вводе символов с начала названия объекта. Поиск по символам из середины названия не поддерживается.
{{< /alert >}}

Если в конфигурации виджета задан начальный префикс, поиск в виджете ограничивается этим префиксом. Загрузка и отображение файлов с другим префиксом недоступны.

### Загрузка файлов

Виджет позволяет загружать файлы из bucket напрямую в браузер. Для каждого файла доступна кнопка загрузки.

### Детальная информация об объектах

При клике на иконку документа для каждого объекта отображается детальная информация:

* Основные параметры: ключ, размер, дата изменения, класс хранения, тип контента, ETag.
* Информация о контенте: кодировка, язык, диспозиция.
* Настройки кэширования: Cache-Control, срок действия.
* Безопасность: серверное шифрование.
* Пользовательские метаданные.

### Подгрузка дополнительных объектов

При наличии большого количества объектов в bucket доступна функция "Загрузить еще" для пошаговой загрузки объектов без потери производительности.

## График

Виджет позволяет выводить информацию об объектах DDP в виде одного из следующих типов графиков:

* Столбчатая диаграмма.
* Кольцевая диаграмма.
* Круговая диаграмма.
* Полярная диаграмма.
* Радарная диаграмма.

### Конфигурация

| Название            | Опциональность  | Описание                                                                                   | Значение по умолчанию  |
|---------------------|-----------------|--------------------------------------------------------------------------------------------|------------------------|
| Тип графика         | **обязательно** | Тип визуализации графика                                                                   | -                      |
| Название таблицы    | **обязательно** | Название таблицы в базе данных, из которой будут браться записи для визуализации           | -                      |
| Название поля       | **обязательно** | Название поля, по которому будет происходить агрегация записей                             | -                      |
| Фильтры             | опционально     | Поля, по которым будут фильтроваться полученные записи, и их значения                      | -                      |
| Тип агрегации       | **обязательно** | Принцип, по которому будут группироваться полученные записи                                | -                      |
| Параметры агрегации | опционально     | Выбор временного периода и шага группировки при агрегации записей по дате                  | -                      |

При настройке виджета следует учитывать, что названия полей в базе данных могут отличаться от названий полей в спецификации объектов. Общий принцип таков: формат camelCase в спецификации объектов при сохранении структур в базу данных преобразуется в snake_case. Например:

* Поле `createdAt` в спецификации следует указывать в конфигурации виджета как `created_at`.
* Поле `resourceUuid` в спецификации следует указывать в конфигурации виджета как `resource_uuid`.

Доступно обращение к вложенным значениям. В таком случае разделителем для вложенности служит символ точки. Например, чтобы выполнить агрегацию по статусу сущностей, виджет следует настроить следующим образом:

| Название таблицы  | Название поля     |
|-------------------|-------------------|
| `entities`        | `health.status`   |

### Типы агрегации

#### Дата

Данные на графике будут отсортированы и сгруппированы по выбранным временным интервалам.

В параметрах агрегации можно задать параметры:

- **Единица измерения шага** — например: секунды, минуты, часы, дни и т.д.
- **Количество единиц в одном шаге** — например: 5 минут, 2 часа, 1 день и т.п.

Это позволяет управлять детализацией отображения данных во времени и адаптировать график под нужный масштаб анализа.

#### Значение

Данные на графике отображаются в отсортированном порядке — по значениям.  
Для каждого уникального значения в исходном наборе данных:

- Выполняется подсчёт количества вхождений.
- На графике отображается пара: **значение - количество**.

Это позволяет быстро увидеть распределение и частоту повторения различных значений.

#### Разбивка по интервалам

Тип агрегации **«Разбивка по интервалам»** позволяет гибко настроить отображение данных на графике, разделяя значения по заданным числовым диапазонам (интервалам). Это удобно для построения гистограмм и анализа распределения данных.

Доступны два режима настройки интервалов:

1. **Автоматическая разбивка по количеству интервалов**.

   Указывается только количество интервалов, на которые нужно разделить доступные данные.  
   Интервалы будут рассчитаны автоматически — равномерно от минимального до максимального значения.

1. **Ручное задание границ интервалов**.

   Указывается массив числовых границ интервалов.  
   Например: `0, 10, 20, 50`

   В этом случае:

   - Числа будут автоматически отсортированы по возрастанию.
   - Интервалы сформируются на основе отсортированных значений:  
     `[0, 10)`, `[10, 20)`, `[20, 50]`

В параметрах агрегации должно быть указано хотя бы одно из двух:

- `Количество` — количество интервалов,  
- `Границы` — границы интервалов.

Примеры:

- `Количество = 5` - построится 5 равных интервалов на основании данных.
- `Границы = 100, 0, 50` - после сортировки: `[0, 50, 100]`, график будет построен по интервалам `[0, 50)`, `[50, 100]`.

## Квоты ресурсов Kubernetes

Виджет позволяет отображать данные о квотах ресурсов в платформе Kubernetes.

Для каждой квоты происходит визуализация занятых ресурсов.

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#kubernetes).

### Конфигурация

| Название       | Опциональность  | Описание                                                                    | Значение по умолчанию |
|----------------|-----------------|-----------------------------------------------------------------------------|-----------------------|
| URL            | **обязательно** | URL API сервера Kubernetes. Используется для получения данных из Kubernetes | -                     |
| Namespace      | **обязательно** | Неймспейс, из которого будут загружаться данные в виджет. Пример: `default` | -                     |

## Процентное значение

Виджет позволяет отображать заданное процентное значение.

### Конфигурация

| Название            | Опционально | Описание                                                                                                                                                        | Значение по умолчанию |
|---------------------|-------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
| Ресурс              | опционально | Ресурс, из которого извлекаются необходимые значения при обработке шаблона                                                                                      | -                     |
| Процентное значение | опционально | Значение, которое будет выводиться на виджет. Шаблонизация поддерживается. Пример без шаблонизации: `100`. Пример с шаблонизацией: `{{ .entity.propeties.id }}` | -                     |

## Таблицы сущностей

Виджет позволяет отображать сущности, созданные в платформе DDP, в виде таблицы.

### Конфигурация

| Название            | Опционально | Описание                                                                                                              | Значение по умолчанию |
|---------------------|-------------|-----------------------------------------------------------------------------------------------------------------------|-----------------------|
| Источник            | опционально | Сущности, которые необходимо отобразить в виде таблицы                                                                | -                     |
| Показывать действия | опционально | Необходимость отображения действия с сущностями (возможность запуска действий, сценарием, возможность удаления и др.) | false                 |

## Временная шкала сущностей

Виджет отображает сущности выбранного ресурса на временной шкале.

### Отображаемые данные

- **График временной шкалы** — горизонтальная диаграмма, где каждая сущность отображается в виде полосы, показывающей период времени (от даты начала до даты окончания).
- **Информация о сущностях** — при наведении на полосу отображается название сущности, дата начала и дата окончания периода.
- **Сортировка** — сущности отсортированы от самых старых (сверху) к самым новым (снизу).

### Конфигурация

| Название            | Опциональность  | Описание                                                                                                                            | Значение по умолчанию |
|---------------------|-----------------|-------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
| Ресурс              | **обязательно** | Ресурс, для которого отображается временная шкала.                                                                                  | -                     |
| Поле даты начала    | **обязательно** | Поле, из которого берется дата начала периода. Может быть системным полем (`createdAt`, `updatedAt`) или параметром типа `Date`.    | -                     |
| Поле даты окончания | **обязательно** | Поле, из которого берется дата окончания периода. Может быть системным полем (`createdAt`, `updatedAt`) или параметром типа `Date`. | -                     |

### Особенности

- Виджет автоматически масштабирует временную шкалу для отображения всех сущностей;
- Сущности с некорректными датами (дата начала позже даты окончания) автоматически исключаются из отображения.

## Календарь сущностей

Виджет отображает сущности выбранного ресурса в календаре.

### Отображаемые данные

- **Недельный календарь** — сетка из 7 дней текущей недели.
- **Сущности по датам** — для каждого дня отображаются все сущности, у которых дата в выбранном поле соответствует этому дню.
- **Информация о сущностях** — для каждой сущности отображаются название и описание (если указано).
- **Навигация по неделям** — кнопки для перехода к предыдущей и следующей неделе.

### Конфигурация

| Название  | Опциональность  | Описание                                                                                                                                               | Значение по умолчанию |
|-----------|-----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
| Ресурс    | **обязательно** | Ресурс, для которого отображается календарь.                                                                                                           | -                     |
| Поле даты | **обязательно** | Поле, из которого берется дата для отображения сущности в календаре. Может быть системным полем (`createdAt`, `updatedAt`) или параметром типа `Date`. | -                     |

### Особенности

- Виджет отображает текущую неделю по умолчанию (с понедельника по воскресенье).
- Доступна навигация между неделями с помощью кнопок «Предыдущая неделя» и «Следующая неделя».
- Для каждого дня отображается дата в формате `ДД.ММ`.
- Сущности отображаются в виде карточек с возможностью перехода на страницу сущности.
- Сущности с пустой или нулевой датой автоматически исключаются из отображения.

## Статус сущности

Виджет отображает информацию о статусе сущности и результатах проверок статуса.

### Отображаемые данные

Виджет показывает следующую информацию.

#### Общий статус

- **Прогресс-бар** — визуальное отображение общего статуса сущности с указанием процента успешно пройденных проверок;
- **Счетчик успешных проверок** — количество пройденных проверок из общего числа настроенных проверок статуса.

#### Список проверок

Для каждой проверки статуса отображается:

- **Название проверки** — название правила проверки.
- **Статус** — результат выполнения проверки:
  - **Пройдено** — проверка успешно пройдена.
  - **Не пройдено** — проверка не пройдена (ошибок выполнения нет).
  - **Ошибка** — при выполнении проверки произошла ошибка.
- **Время последней проверки** — дата и время последнего выполнения проверки.
- **Сообщение об ошибке** — текст ошибки (отображается, если проверка завершилась с ошибкой).

#### Статистика

В нижней части виджета отображается сводная статистика по проверкам:

- **Пройдено** — количество успешно пройденных проверок.
- **Не пройдено** — количество проверок, которые не были пройдены (без ошибок выполнения).
- **Ошибка** — количество проверок, завершившихся с ошибкой.

#### Заблокированные действия

Виджет автоматически определяет и отображает действия, которые недоступны при текущем статусе сущности.

- **Условия отображения:**
  - действие должно быть доступно для ресурса, связанного с сущностью;
  - у действия должны быть настроены разрешенные статусы;
  - текущий статус сущности не входит в список разрешенных статусов для этого действия.

- **Отображаемая информация:**
  - название действия;
  - описание действия (если указано).

### Конфигурация

Виджет не требует дополнительной конфигурации.

Для работы виджета необходимо настроить проверки статуса для ресурса, связанного с сущностью (см. [подробнее](../healthchecks/overview/)).

### Особенности

Виджет имеет следующие особенности:
- если для сущности не настроено ни одной проверки статуса, виджет отображает сообщение о том, что проверки отсутствуют;
- если данные о проверках статуса недоступны, виджет отображает сообщение об отсутствии данных.

## Статистика событий

Виджет отображает статистику событий, происходящих с сущностями в платформе DDP. Виджет содержит три таба:

1. **Статистика событий** - график, показывающий количество событий по типам за выбранный временной период с настраиваемой группировкой по времени.
2. **Топ сущностей** - таблица с сущностями, для которых было сгенерировано максимальное количество событий.
3. **События в Redis** - таблица со стримами событий из Redis, показывающая для каждого стрима:
   - Название стрима (кликабельное для просмотра всех событий).
   - Ресурс, к которому относится стрим.
   - Количество событий в стриме.
   - Информацию о последнем событии (сущность, ресурс, тип события, время).

### Параметры запроса

| Название        | Опционально | Описание                                                                                   | Значение по умолчанию |
|-----------------|-------------|--------------------------------------------------------------------------------------------|-----------------------|
| Дата от         | обязательно | Начальная дата для выборки событий                                                         | 3 дня назад           |
| Дата до         | обязательно | Конечная дата для выборки событий                                                          | текущая дата          |
| Интервал        | опционально | Интервал группировки событий на графике (секунды, минуты, часы, дни, недели, месяцы, годы) | час                   |
| Шаг интервала   | опционально | Количество единиц интервала для группировки                                                | 1                     |
| Топ сущностей   | опционально | Количество сущностей с максимальным количеством событий для отображения в таблице          | 10                    |

### Типы событий

Виджет поддерживает следующие типы событий:

- **ENTITY_CREATED** - создание сущности.
- **ENTITY_UPDATED** - обновление сущности.
- **ENTITY_DELETED** - удаление сущности.

#### Особенности

- График показывает события за выбранный временной период с настраиваемой группировкой по времени (по умолчанию - по часам).
- Таблица отображает все события для каждой сущности (без фильтрации по дате).
- Для удаленных сущностей отображается их название, извлеченное из спецификации события.
- Вкладка «События в Redis» позволяет отслеживать события, хранящиеся в Redis Streams:
  - Для каждого стрима отображается количество событий и информация о последнем событии.
  - При клике на название стрима открывается диалог со всеми событиями из этого стрима.
  - Стримы автоматически привязываются к ресурсам по UUID, указанному в названии стрима.
  - При просмотре событий из стрима отображаются последние 1000 событий (новые первыми). Если в стриме больше 1000 событий, более старые события не отображаются.
- Каждая строка в таблице содержит информацию о последнем событии для сущности.
- Доступен просмотр детальной истории изменений для каждой сущности.
- События для удаленных ресурсов не отображаются (удаляются из БД при удалении ресурса).

## Числовое значение

Виджет позволяет отображать заданное числовое значение.

### Конфигурация

| Название          | Опционально | Описание                                                                                                                                                        | Значение по умолчанию |
|-------------------|-------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
| Ресурс            | опционально | Ресурс, из которого извлекаются необходимые значения при обработке шаблона                                                                                      | -                     |
| Числовое значение | опционально | Значение, которое будет выводиться на виджет. Шаблонизация поддерживается. Пример без шаблонизации: `100`. Пример с шаблонизацией: `{{ .entity.propeties.id }}` | -                     |

## Kaiten. Карточки пространства

Виджет позволяет отображать структуру задач в пространстве Kaiten в виде многоуровневой таблицы **Доска → Карточки**, просматривать задачи на всех уровнях организации работы и получать информацию о критичных параметрах карточек (статус, срочность, блокировки, исполнители и др.).

### Конфигурация

| Название        | Опциональность  | Описание                            | Значение по умолчанию |
|-----------------|-----------------|-------------------------------------|-----------------------|
| ID пространства | **обязательно** | Идентификатор пространства в Kaiten | -                     |

### Параметры запроса

| Название      | Опциональность  | Описание                        | Значение по умолчанию |
|---------------|-----------------|---------------------------------|-----------------------|
| Мои задачи    | опционально     | Фильтр по текущему пользователю | false                 |
| Создано после | **обязательно** | Начальная дата для выборки      | 1 месяц назад         |
| Создано до    | **обязательно** | Конечная дата для выборки       | сейчас                |

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#kaiten).

### Отображаемые данные

Каждая карточка содержит:
- Название карточки.
- Колонка (статус в доске).
- Статус (очередь,в работе, готово).
- Линия.
- Владелец (аватар, имя, email).
- Участники.
- Срок (дата дедлайна, срочность).
- Блокированная/незаблокированная.

## Kaiten. Статистика пространства

Виджет предоставляет агрегированные метрики и статистику карточек пространства Kaiten за выбранный период. Позволяет анализировать эффективность работы команды и выявлять узкие места в бизнес-процессах.

### Конфигурация

| Название        | Опциональность  | Описание                            | Значение по умолчанию |
|-----------------|-----------------|------------------------------------ |-----------------------|
| ID пространства | **обязательно** | Идентификатор пространства в Kaiten | -                     |

### Параметры запроса

| Название      | Опциональность  | Описание                   | Значение по умолчанию |
|---------------|-----------------|----------------------------|-----------------------|
| Создано после | **обязательно** | Начальная дата для анализа | 1 месяц назад         |
| Создано до    | **обязательно** | Конечная дата для анализа  | сейчас                |

### Авторизация

Конфигурация авторизации описана в разделе [Внешние сервисы](../external-services/#kaiten).

### Отображаемые данные

Виджет содержит четыре вкладки:

#### Общие показатели

Основные метрики:

- В очереди: задачи в очереди на выполнение.
- Выполнено: завершенные задачи.
- В работе: активные задачи.

Дополнительные метрики:

- Заблокировано: количество заблокированных задач.
- Блокирующих: количество задач, блокирующих другие.
- Архивировано: количество задач в архиве.
- Срочных: количество срочных задач.
- В среднем на выполнение: среднее время выполнения (в минутах).

Статистика по чеклистам:

- Всего с чек-листом: общее количество задач с чек-листами.
- Чеклист полностью выполнен: задачи с полностью выполненными чек-листами.
- Чеклист не выполнен: задачи с невыполненными чек-листами.

#### По пользователю

- Список пользователей с количеством назначенных задач.
- Визуализация в виде прогресс-баров.
- Количество задач на каждого пользователя.

#### Забытые задачи

Карточки, которые не обновлялись с момента создания.

#### Последние обновленные

Десять последних обновленных карточек.

## Очередь задач

Виджет позволяет отслеживать состояние очереди задач и работу воркеров, обрабатывающих задачи в фоновом режиме. Виджет отображает статистику очереди, информацию о воркерах (консьюмерах) и детали всех задач в очереди.

### Отображаемые данные

Виджет состоит из трех основных разделов:

#### Статистика очереди

В верхней части виджета отображаются четыре ключевых показателя:

- **Размер очереди** — общее количество задач в очереди.
- **Ожидающие задачи** — количество задач, ожидающих обработки.
- **Активные воркеры** — количество активных воркеров (консьюмеров), обрабатывающих задачи.
- **Задачи в очереди** — общее количество задач, включая новые и обрабатываемые.

#### Таблица воркеров

Таблица содержит информацию о каждом активном воркере:

- **Название консьюмера** — идентификатор воркера (консьюмера).
- **Ожидающие задачи** — количество задач, назначенных данному воркеру и ожидающих обработки.
- **Время простоя** — время с момента последней активности воркера.

{{< alert level="info" >}}
В таблице отображаются только активные воркеры. Воркеры, которые не обрабатывают задачи и неактивны более 5 минут, автоматически скрываются из списка.
{{< /alert >}}

#### Таблица задач

Таблица содержит детальную информацию о всех задачах в очереди:

- **UUID задачи** — уникальный идентификатор задачи.
- **Тип** — тип задачи (например, `health_check`).
- **UUID ресурса** — идентификатор ресурса или сущности, к которой относится задача.
- **Консьюмер** —название консьюмера, обрабатывающего задачу.
- **Время простоя** — время с момента доставки задачи воркеру.
- **Время доставки** — время, когда задача была доставлена воркеру.
- **Статус** — текущий статус задачи:
  - **Новая** — задача добавлена в очередь, но еще не назначена воркеру.
  - **В обработке** — задача назначена воркеру и обрабатывается.

### Конфигурация

Виджет не требует дополнительной конфигурации и работает сразу после добавления на дашборд.
