---
title: Верхнеуровневая архитектура
weight: 5
---

## Цель и назначение системы

Deckhouse Development Platform (DDP) — это IDP (Internal Developer Platform), которая ускоряет и упрощает процессы разработки. Платформа представляет собой комплексное решение для управления всеми этапами разработки через единое окно.

DDP помогает ИТ-специалистам работать эффективнее — автоматизирует операции, связанные с жизненным циклом продуктов. Платформа обеспечивает централизованный доступ к ресурсам и инструментам, прозрачность процессов разработки и их автоматизацию, а также быстрый онбординг новых сотрудников.

**Основные задачи платформы:**

- Обеспечение единых стандартов разработки для команд через шаблоны и типовые конфигурации
- Управление динамическими окружениями с автоматическим созданием, обновлением и удалением сред
- Интеграция с внешними инфраструктурными сервисами через API
- Упрощённый онбординг разработчиков и команд за счёт шаблонных решений и документации
- Оцифровка процессов и сценариев разработки через BPMN-подобный механизм описания процессов
- Встроенная CMDB для автоматического сбора данных из инфраструктурных сервисов и визуализации зависимостей
- Контроль параметров сущностей через механизм проверок статуса

## Пользователи системы

### Команды разработки

Команды разработки потребляют предоставляемые платформой ресурсы. Пользователи работают с сущностями и ресурсами платформы: создают и управляют сущностями, запускают действия, просматривают данные из источников данных, используют виджеты и работают с процессами.

### Менеджмент

Менеджмент получает статистику и данные для принятия решений. Пользователи могут просматривать дашборды с метриками, анализировать эффективность разработки, отслеживать ключевые показатели и получать отчеты о работе команд.

### Команды инфраструктуры и платформенные команды

Команды инфраструктуры и платформенные команды предоставляют инфраструктурные и платформенные сервисы компании в удобном для разработки виде. Пользователи настраивают интеграции с внешними сервисами, конфигурируют ресурсы, создают шаблоны и автоматизации, управляют окружениями и обеспечивают работу платформы.

### Команды безопасности

Команды безопасности предоставляют инструменты безопасности через DDP, проводят аудит и наблюдают за выполнением требований. Пользователи настраивают политики безопасности, управляют правами доступа, просматривают аудит-логи, контролируют соблюдение требований безопасности и настраивают механизмы защиты.

### Администраторы

Администраторы — это пользователи, которые могут настраивать все компоненты платформы. Могут управлять пользователями, настраивать роли и права доступа через систему RBAC, конфигурировать интеграции с внешними сервисами, управлять учетными данными, просматривать аудит-логи, настраивать ресурсы, конфигурацию платформы и автоматизации.

Права доступа для всех групп пользователей настраиваются через систему ролевого доступа (RBAC), которая позволяет гибко управлять разрешениями на уровне глобальных ролей, ролей ресурсов и ролей сущностей.

## Доступ к системе

### Веб-интерфейс

Все группы пользователей получают доступ к платформе через веб-интерфейс **DDP Frontend**, который предоставляет графический интерфейс для работы с платформой через веб-браузер.

**Протокол доступа:** HTTPS (TCP/443)

**Аутентификация:** Пользователи проходят аутентификацию через компонент **Dex**, который интегрируется с внешними провайдерами аутентификации (Keycloak, LDAP и др.) через стандартные протоколы (OIDC, LDAP). После успешной аутентификации пользователь получает JWT токен доступа, который используется для авторизации запросов к платформе.

### REST API

Администраторы и разработчики могут напрямую обращаться к **DDP Backend** через REST API для программного взаимодействия с платформой.

**Протокол доступа:** HTTPS (TCP/443)

**Аутентификация:**
- Через JWT токен доступа, полученный от Dex (заголовок `Authorization: Bearer <token>`)
- Через API ключ (для программного доступа)

REST API предоставляет полный набор функций для управления всеми объектами платформы: сущностями, ресурсами, действиями, источниками данных, виджетами, процессами и другими компонентами.

## Доступ снаружи/внутри периметра компании

Платформа DDP развертывается в Kubernetes кластере и может быть доступна как внутри корпоративного периметра, так и снаружи, в зависимости от конфигурации сетевой инфраструктуры.

### Доступ внутри периметра

**Типичный сценарий:** Пользователи получают доступ к платформе через внутреннюю сеть компании.

- Веб-интерфейс и REST API доступны через внутренний Ingress контроллер
- Доступ осуществляется по внутренним доменным именам (например, `ddp.internal.company.com`)
- Аутентификация может быть интегрирована с корпоративным LDAP или Active Directory через Dex
- Дополнительная защита может обеспечиваться на уровне сетевых политик Kubernetes

### Доступ снаружи периметра

**Типичный сценарий:** Пользователи получают доступ к платформе извне корпоративной сети.

- Веб-интерфейс и REST API доступны через публичный Ingress контроллер
- Доступ осуществляется по публичным доменным именам (например, `ddp.company.com`)
- Аутентификация может быть интегрирована с внешними провайдерами аутентификации через Dex

### Гибридный доступ

Платформа может быть настроена для поддержки обоих сценариев одновременно:
- Внутренние пользователи получают доступ через внутренний Ingress
- Внешние пользователи (например, удаленные сотрудники) получают доступ через публичный Ingress или VPN
- Различные группы пользователей могут использовать разные провайдеры аутентификации через Dex

Конфигурация доступа настраивается администратором при развертывании платформы через параметры Ingress контроллера и сетевые политики Kubernetes.
