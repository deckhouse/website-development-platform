---
title: Процессы
menuTitle: Процессы
d8Edition: ee
moduleStatus: experimental
---

Процессы - это механизм автоматизации сложных бизнес-процессов, который позволяет создавать визуальные схемы выполнения действий с поддержкой условной логики, параллельного выполнения и обработки ошибок.

Процессы предоставляют более гибкий и мощный инструмент по сравнению со сценариями, позволяя создавать сложные workflow с ветвлением, циклами и компенсационными действиями.

## Основные концепции

### Элементы процесса

Процесс состоит из различных типов элементов:

* **Начало** - точка входа в процесс
* **Задача** - выполнение конкретного действия
* **Эксклюзивный шлюз** - условное ветвление (if-else логика)
* **Параллельный шлюз** - параллельное выполнение веток
* **Конец** - завершение процесса

### Обработка ошибок

Каждый элемент процесса может иметь настройки обработки ошибок:

* **Количество попыток перезапуска** - сколько раз повторить действие при ошибке
* **Задержка перезапуска** - интервал между попытками
* **Время на выполнение** - максимальное время выполнения элемента
* **Перезапуск по тайм-ауту** - автоматический перезапуск при превышении времени

## Создание процесса

### Основная информация

Для создания процесса перейдите в раздел `Самообслуживание` → `Процессы` и нажмите кнопку `Создать`.

Заполните следующие поля:

* **Название** - название процесса
* **Описание** - подробное описание назначения процесса
* **Ресурс** - ресурс, для которого доступен процесс
* **Владелец** - пользователь, ответственный за процесс
* **Команда владелец** - команда, ответственная за процесс
* **Теги** - теги для категоризации процесса
* **Иконка** - иконка для отображения в интерфейсе

### Конфигурация процесса

На вкладке `Конфигурация` создается визуальная схема процесса:

#### Добавление элементов

1. Нажмите кнопку с типом элемента в панели редактора для создания нового элемента
2. Настройте параметры элемента в визуальном редакторе
3. Свяжите элемент с другими элементами процесса

#### Типы элементов

##### Задача

- Связывается с конкретным действием
- Настраивается время выполнения и обработка ошибок
- Может иметь входящие и исходящие связи

##### Эксклюзивный шлюз

- Создает условное ветвление процесса
- Настраивается условие для каждой исходящей ветки
- Только одна ветка может быть выполнена

##### Параллельный шлюз

- Разделяет процесс на параллельные ветки
- Настраивается ожидание всех или любого входящего элемента
- Все ветки выполняются одновременно

#### Связывание элементов

1. Перетащите элемент на схему
2. Создайте связи между элементами, перетаскивая от одного элемента к другому
3. Настройте условия для условных переходов

### Параметры процесса

На вкладке `Параметры` настраиваются параметры процесса, которые могут использоваться во всех действиях процесса.

Конфигурация и использование параметров процесса описаны в разделе [шаблонизация](../user/templating.html#параметры-процесса).

## Запуск процесса

### Ручной запуск

1. Перейдите к сущности, для которой нужно запустить процесс
2. В меню сущности выберите `Запустить процесс`
3. Выберите нужный процесс из списка
4. Заполните параметры процесса
5. Нажмите `Запустить`

### Параметры запуска

При запуске процесса доступны:

* **Общие параметры процесса** - параметры, определенные в конфигурации процесса
* **Параметры действий** - параметры для каждого действия в процессе
* **Переменные окружения** - дополнительные переменные для выполнения

## Управление выполнением

### Статусы процесса

Процесс может находиться в следующих статусах:

* **Создан** - процесс создан, но не запущен
* **Выполняется** - процесс находится в процессе выполнения
* **Приостановлен** - выполнение процесса приостановлено
* **Завершен** - процесс успешно завершен
* **Неудачно** - процесс завершился с ошибкой
* **Отменен** - выполнение процесса было отменено

### Управление выполнением

Для активных процессов доступны следующие операции:

* **Приостановить** - временно остановить выполнение
* **Возобновить** - продолжить выполнение после приостановки
* **Остановить** - полностью остановить выполнение
* **Принудительный перезапуск** - перезапустить процесс с начала

### Мониторинг

В разделе «История запусков» можно просмотреть:

* Список всех запусков процесса
* Детальную информацию о каждом запуске
* Логи выполнения действий
* Статус каждого элемента процесса

#### Где смотреть лог процесса

Кнопка «Лог процесса» на экране визуализации процесса — справа на панели инструментов графа (иконка лога рядом с Fullscreen, Zoom, Refresh). Подсказка кнопки: «Лог запуска процесса». Кнопка доступна только при выбранном экземпляре процесса; если экземпляр не выбран — кнопка неактивна. По нажатию открывается диалог с заголовком «Лог запуска процесса» и текстом лога.

#### Что выводится в логе процесса

В диалоге показывается лог выполнения выбранного экземпляра процесса:

1. **Сохранённый лог** — шаги движка (старт, выполнение задач, пауза, возобновление, остановка, одобрение и т.д.), сообщения уровня INFO/WARN/ERROR во время выполнения процесса.
2. **Строки в реальном времени** — если включена передача по WebSocket, в конец лога дописываются приходящие строки до закрытия диалога.

Формат каждой строки: `[дата время] [LEVEL] сообщение`. Пример:

```text
[2025-02-04 12:00:00] [INFO] custom task completed
```

## Примеры использования

### Создание проекта с настройкой

1. **Начало** - запуск процесса
2. **Задача** - создание проекта в GitLab
3. **Эксклюзивный шлюз** - проверка успешности создания
4. **Задача** (при успехе) - настройка переменных проекта
5. **Задача** (при ошибке) - отправка уведомления об ошибке
6. **Конец** - завершение процесса

### Развертывание приложения

1. **Начало** - запуск процесса развертывания
2. **Параллельный шлюз** - разделение на ветки
3. **Задача** (ветка 1) - создание namespace в Kubernetes
4. **Задача** (ветка 2) - создание секретов в Vault
5. **Параллельный шлюз** - ожидание завершения обеих веток
6. **Задача** - развертывание приложения
7. **Конец** - завершение процесса

## Ограничения

* Процессы не могут содержать более 100 элементов
* Максимальное время выполнения процесса - 24 часа
* Количество одновременных запусков процесса ограничено настройками системы
* Некоторые действия могут быть недоступны для использования в процессах
