---
title: Действие Wait (ожидание)
menuTitle: Действие Wait
d8Edition: ee
moduleStatus: stable
---

**Wait** — встроенное действие платформы, которое при выполнении ждёт заданное количество секунд. Используется в процессах и воркфлоу, когда нужно сделать паузу между шагами (например, дать время деплою или внешнему сервису), симулировать задержку при тестах или равномерно распределить нагрузку с помощью jitter. В отличие от действия Debug, Wait предназначен именно для ожидания и не содержит лишних параметров.

## 1. Параметры (тело действия)

Параметры задаются в поле **Body** действия в формате YAML.

| Параметр | Тип | Обязательный | По умолчанию | Описание |
|----------|-----|--------------|--------------|----------|
| `duration_seconds` | number | да | — | Длительность ожидания в секундах. От 0 до 86400 (24 часа). |
| `jitter_seconds` | number | нет | 0 | Случайная добавка: к `duration_seconds` прибавляется случайное число от 0 до `jitter_seconds`. 0 — без джиттера. Не может быть отрицательным. |
| `description` | string | нет | — | Подпись для логов (например, «Ожидание после деплоя»). Отображается в логах при старте и в поле `description` успешного ответа. |

### Ограничения

- `duration_seconds`: от 0 до **86400** (24 часа). При превышении лимита выполнение завершится с ошибкой.
- Итоговая длительность (с учётом jitter) также ограничена 86400 секундами.

### Пример тела (YAML)

```yaml
duration_seconds: 10
jitter_seconds: 0
description: "Ожидание после деплоя"
```

Минимальный вариант (только обязательное поле):

```yaml
duration_seconds: 5
```

## 2. Переопределение длительности при запуске

При запуске действия (с сущности, из процесса или воркфлоу) можно передать длительность в **параметрах (Properties)**. Если она задана, она подменяет значение `duration_seconds` из тела действия.

Поддерживаются два ключа (достаточно одного):

- **`duration_seconds`** — то же имя, что и в теле;
- **`wait`** — удобно, если у действия есть свойство (property) с slug `wait` (число секунд).

Значение должно быть неотрицательным целым (или строкой с числом). При отрицательном или нечисловом значении используется значение из тела действия.

Пример: в теле задано `duration_seconds: 60`, при запуске в параметрах передано `wait: 30` → будет ожидание 30 секунд.

## 3. Отмена

Ожидание разбито на интервалы по 1 секунде. После каждого интервала проверяется отмена (например, остановка процесса или отмена записи действия). Отмена срабатывает в течение примерно 1 секунды. При отмене действие завершается с ошибкой (например, `context canceled`).

## 4. Ответ при успехе

В поле ответа действия возвращается JSON, например:

```json
{
  "duration_seconds": 10
}
```

Если в теле задано поле `description`, оно тоже попадает в ответ:

```json
{
  "duration_seconds": 10,
  "description": "Ожидание после деплоя"
}
```

`duration_seconds` в ответе — фактическое время ожидания в секундах (с учётом jitter и ограничения по максимуму).

## 5. Где использовать

- **Процесс (BPMN):** добавьте шаг-задачу с действием типа Wait, чтобы вставить паузу между шагами (например, между деплоем и проверкой здоровья).
- **Воркфлоу:** добавьте действие Wait в цепочку действий для задержки между шагами.
- **Запуск с сущности:** редко нужно; обычно Wait используется внутри процессов и воркфлоу.

## 6. Отличие от Debug

| Аспект | Wait | Debug |
|--------|------|-------|
| Назначение | Только ожидание | Отладка, тесты, логи, sleep |
| Параметры | duration, jitter, description | sleep_time, sleep_count, extra |
| Переопределение при запуске | duration_seconds / wait | Нет |
| Лимит времени | Да (24 ч) | Нет |
| Проверка отмены | Каждую секунду | По окончании каждого sleep |

Для пауз в процессах и воркфлоу рекомендуется использовать **Wait**.
